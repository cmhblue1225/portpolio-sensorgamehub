# 📱 Sensor Game Hub v6.0 - 유저 인터페이스 명세서

## 🎯 주요 페이지 구조

### 1. 랜딩 페이지 (/)
**URL**: `http://localhost:3000/`

**화면 구성**:
- 상단 Hero 섹션: 프로젝트 제목 "Sensor Game Hub v6.0" 그라데이션 텍스트
- 시스템 통계 카드 (3개):
  - 게임 수 (예: 12개)
  - 문서 수 (35개)
  - AI 벡터 수 (616개)
- 주요 진입 버튼 (5개):
  - 🎮 **게임 목록** → `/games/`
  - 📱 **센서 클라이언트** → `/sensor.html`
  - 🤖 **AI 게임 생성기** → `/interactive-game-generator`
  - 🛠️ **게임 관리** → `/game-manager`
  - 👨‍💻 **개발자 센터** → `/developer`
- 하단 플랫폼 기능 소개 (4개):
  - ⚡ 실시간 센서 (50ms 간격)
  - 🔗 즉시 연결 (QR 코드)
  - 🤖 AI 지원 (616개 벡터)
  - 🎨 게임 생성기 (대화형)

---

### 2. 게임 목록 페이지 (/games/)
**URL**: `http://localhost:3000/games/`

**화면 구성**:
- 상단: "🎮 게임 목록" 헤더
- 통계 바 (4개):
  - 전체 게임 수
  - 솔로 게임 수
  - 듀얼 게임 수
  - 멀티 게임 수
- 게임 카드 그리드:
  - 게임 아이콘 (🎮)
  - 게임 제목
  - 게임 ID (예: `ball-balance-game`)
  - 게임 타입 배지 (Solo/Dual/Multi)
  - 게임 설명
  - ▶ 게임 시작 버튼 → `/games/{gameId}/`

**입력**:
- 게임 카드 클릭 → 해당 게임 페이지로 이동

---

### 3. 게임 상세 페이지 (/games/{gameId}/)
**URL**: `http://localhost:3000/games/{gameId}/`
**예시**: `http://localhost:3000/games/gravity-toss-sensor-game/`

**화면 구성**:
- 게임별 고유 UI (각 게임의 `index.html`)
- **공통 요소**:
  - 세션 코드 표시 (4자리 숫자, 예: `0000`-`9999`)
  - QR 코드 생성 (자동, 크기 200x200px)
  - 센서 연결 상태 인디케이터
    - 🔴 "센서 연결 대기 중..." (연결 전)
    - 🟢 "센서 연결됨" (연결 후)
  - 게임 시작 버튼 (센서 연결 후 활성화)

**입력**:
- 세션 자동 생성 (페이지 로드 시)
- 센서 데이터 수신 (WebSocket, 50ms 간격)

**출력**:
- 세션 코드: 4자리 숫자
- QR 코드: 센서 클라이언트 연결 URL
- 게임 진행 상태 (예: 점수, 타이머, 레벨)

---

### 4. 센서 클라이언트 (/sensor.html)
**URL**: `http://localhost:3000/sensor.html?session={sessionCode}`

**화면 구성**:
- 상단: "📱 센서 클라이언트" 헤더
- 세션 코드 입력 (4자리, 필수)
- 권한 허용 버튼 (iOS DeviceMotion/DeviceOrientation)
- 센서 상태 표시:
  - 가속도: x, y, z (실시간)
  - 방향: alpha (0-360°), beta (-180~180°), gamma (-90~90°)
  - 회전 속도: alpha, beta, gamma
- 시작/중지 토글 버튼
- 설정:
  - 샘플링 간격 (20-100ms, 기본 50ms)
  - 민감도 (0.5-2.0, 기본 1.0)

**입력**:
- 세션 코드: 숫자 4자리 입력
- 센서 권한 수락 (필수)
- 시작/중지 토글

**출력**:
- 연결 상태 배지 (연결됨/대기중/오류)
- 실시간 센서 값 표시
- 초당 전송 횟수 (Hz)

---

### 5. 게임 관리 페이지 (/game-manager)
**URL**: `http://localhost:3000/game-manager`

**화면 구성**:
- 상단: "🛠️ 게임 관리 - Sensor Game Hub" 헤더
- 설명: "생성된 게임을 관리하고 개선하세요"
- 검색창: 게임 제목 또는 ID로 필터링
- 게임 카드 그리드:
  - 게임 제목, ID
  - 버전 배지 (예: `v1.0`, `v1.1`) → 실시간 로드
  - 액션 버튼 (4개):
    - ▶️ 플레이
    - 🐛 버그 신고
    - ✨ 기능 추가
    - 📜 이력 보기

**버그 신고 모달**:
- 제목: "🐛 버그 신고"
- 입력 필드:
  - 버그 설명 (필수, textarea)
  - 재현 방법 (선택, textarea)
- 제출 버튼
- 로딩 인디케이터 (처리 중...)

**기능 추가 모달**:
- 제목: "✨ 기능 추가"
- 입력 필드:
  - 기능 설명 (필수, textarea)
  - 추가 요구사항 (선택, textarea)
- 제출 버튼
- 로딩 인디케이터

**수정 이력 팝업**:
- 표시 내용:
  - 수정 타입 (버그 수정 / 기능 추가)
  - 설명
  - 버전 번호
  - 시간 (로케일 시간)

**입력**:
- 검색어: 게임 제목 또는 ID (keyup 이벤트)
- 버그 설명: 최대 2000자 권장
- 기능 설명: 최대 2000자 권장

**출력**:
- 성공 알림: "✅ 버그가 수정되었습니다!\n버전: v1.1"
- 성공 알림: "✅ 기능이 추가되었습니다!\n버전: v1.2"
- 오류 알림: "❌ 오류: {에러 메시지}"
- 페이지 자동 새로고침 (성공 시)

**API 엔드포인트**:
- `POST /api/maintenance/report-bug`
  - Body: `{ gameId, bugDescription, userContext }`
  - Response: `{ success, version, message }`
- `POST /api/maintenance/add-feature`
  - Body: `{ gameId, featureDescription, userContext }`
  - Response: `{ success, version, message }`
- `GET /api/maintenance/history/{gameId}`
  - Response: `{ success, history: [{ type, description, version, timestamp }] }`
- `GET /api/maintenance/version/{gameId}`
  - Response: `{ success, version }`

---

### 6. 개발자 센터 (/developer)
**URL**: `http://localhost:3000/developer`

**화면 구성**:
- **상단 헤더**:
  - "Developer Center" 제목 (그라데이션)
  - ← 홈으로 버튼
- **좌측 사이드바** (320px 고정):
  - 문서 트리 (11개 카테고리):
    1. Root Docs (4개 문서)
    2. Game Development (6개 문서)
    3. API & SDK (1개 문서)
    4. Sensor Processing (3개 문서)
    5. Game Types (3개 문서)
    6. Troubleshooting (3개 문서)
    7. Advanced (5개 문서)
    8. Examples (8개 문서)
    9. Project Plans (2개 문서)
  - 각 문서 클릭 시 마크다운 렌더링
- **우측 콘텐츠 영역**:
  - **탭 시스템** (4개):
    1. 🏠 시작하기 (기본)
    2. 📚 문서
    3. 💬 AI 챗봇
    4. 🎮 게임 생성기

#### 탭 1: 🏠 시작하기
- 환영 메시지
- 통계 표시 (35개 문서, AI 챗봇, 게임 생성기)
- Quick Links (3개 카드):
  - 📚 문서 보기
  - 💬 AI 챗봇
  - 🎮 게임 생성

#### 탭 2: 📚 문서
- 마크다운 뷰어 영역
- 선택된 문서의 렌더링된 HTML 표시
- 코드 하이라이팅 (highlight.js, atom-one-dark 테마)
- 스크롤 가능, 링크 클릭 시 문서 내 이동

#### 탭 3: 💬 AI 챗봇
- 채팅 메시지 영역 (400px 높이, 스크롤)
- 환영 메시지:
  - "👋 안녕하세요! Sensor Game Hub AI 어시스턴트입니다."
  - "616개의 벡터 임베딩으로 정확한 답변을 제공합니다."
- 입력 영역:
  - Textarea (높이 80px)
  - Placeholder: "센서 게임 개발에 대해 질문하세요... (Shift+Enter: 줄바꿈, Enter: 전송)"
  - 전송 버튼
- 메시지 스타일:
  - 사용자 메시지: 파란색 테두리 (#6366F1)
  - AI 응답: 보라색 테두리 (#A855F7)
  - 로딩 (typing): 점 3개 애니메이션

**입력**:
- 메시지 입력 (Enter 키 또는 버튼 클릭)
- Shift+Enter로 줄바꿈

**출력**:
- AI 응답 (마크다운 지원)
- 검색된 관련 문서 (RAG 기반)

#### 탭 4: 🎮 게임 생성기 (대화형)
- **진행 단계 바** (4단계):
  1. 아이디어
  2. 세부사항
  3. 메커니즘
  4. 확인
- **대화형 채팅 영역** (400px 높이):
  - 환영 메시지:
    - "🎮 Sensor Game Hub 대화형 게임 생성기에 오신 것을 환영합니다!"
    - "어떤 게임을 만들고 싶으신가요?"
    - 예시 3개:
      - "스마트폰을 기울여서 공을 굴리는 미로 게임"
      - "친구와 함께 흔들어서 요리하는 협력 게임"
      - "여러 명이 경쟁하는 반응속도 테스트 게임"
  - 사용자 메시지 / 봇 응답
- **입력 영역**:
  - Input text (게임 아이디어 입력)
  - 전송 버튼
- **생성 버튼 영역** (확인 단계에서 표시):
  - 🚀 게임 생성 시작
  - ✏️ 요구사항 수정

**게임 생성 진행 모달** ⭐ 상세:
- 제목: "🎮 게임 생성 중..."
- **5단계 표시**:
  1. ⏳ 게임 아이디어 분석 중...
  2. ⏳ 관련 문서 검색 중... (616개 임베딩)
  3. ⏳ Claude AI로 게임 코드 생성 중...
  4. ⏳ 게임 코드 검증 중...
  5. ⏳ 게임 파일 저장 및 등록 중...
- 진행률 바 (0-100%)
- 실시간 업데이트 (Socket.IO)
  - 각 단계 완료 시: ⏳ → ✅
  - 현재 단계: 굵은 글씨, 강조 표시

**게임 생성 완료 모달**:
- 제목: "✅ 게임 생성 완료!"
- 결과 표시:
  - 게임 ID (예: `my-awesome-game`)
  - 게임 이름
  - 게임 타입 (solo/dual/multi)
  - 검증 점수 (예: 85/100)
- 액션 버튼 (3개):
  - 🎮 바로 플레이하기 → `/games/{gameId}/`
  - 💾 게임 다운로드 (ZIP 파일)
  - 🔄 새 게임 만들기 (초기화)

**입력**:
- 게임 아이디어: 자유 텍스트 (권장 최대 300자)
- 대화 응답: AI가 질문하면 답변 (예: 게임 타입, 장르, 메커닉)

**출력**:
- 진행률 실시간 업데이트 (0%, 20%, 40%, 60%, 80%, 100%)
- 각 단계 상태 (⏳ 진행중 → ✅ 완료)
- 최종 게임 ID, URL, 메타데이터
- ZIP 파일 다운로드 (구조: `{gameId}/index.html`, `{gameId}/game.json`)
- 다운로드 안내 메시지:
  ```
  ✅ 게임 ZIP 파일이 다운로드되었습니다!

  📦 다운로드한 ZIP 파일 사용 방법:
  1. {gameId}.zip 압축 해제
  2. 압축 해제된 폴더를 'public/games/' 경로에 복사
  3. 서버가 자동으로 게임을 감지합니다

  💡 Tip: 게임이 자동 등록되어 바로 플레이 가능합니다!
  ```

**API 엔드포인트**:
- `POST /developer/api/start-game-session`
  - Response: `{ success, sessionId, message, stage }`
- `POST /developer/api/game-chat`
  - Body: `{ sessionId, message }`
  - Response: `{ success, message, stage, requirements, sessionId }`
- `POST /developer/api/finalize-game`
  - Body: `{ sessionId }`
  - Response: `{ success, gameId, gameUrl, metadata, validationScore, message }`
- `GET /developer/api/download-game/{gameId}`
  - Response: ZIP 파일 스트림

**WebSocket 이벤트** (Socket.IO):
- 이벤트명: `game-generation-progress`
- 데이터 구조:
  ```javascript
  {
    sessionId: "game-session-1234567890-abc123",
    step: 3,          // 1-5
    percentage: 50,   // 0-100
    message: "Claude AI로 게임 코드 생성 중..."
  }
  ```

---

## 📋 입력 형식 상세

### 1. 세션 코드 (공통)
- **형식**: 숫자 4자리
- **범위**: `0000` ~ `9999`
- **검증**: 정규식 `^\d{4}$`
- **오류 메시지**: "4자리 숫자만 입력하세요"

### 2. 게임 검색 (게임 목록)
- **형식**: 텍스트 (한/영/숫자)
- **최대 길이**: 50자
- **필터 타입**: 제목, ID 포함 검색

### 3. 센서 권한 (센서 클라이언트)
- **필수 권한**:
  - iOS: `DeviceMotionEvent` + `DeviceOrientationEvent`
  - Android: 자동 허용
- **거부 시**: 재시도 가이드 표시 + 헬프 링크

### 4. 센서 설정 (센서 클라이언트)
- **샘플링 간격** (throttle):
  - 범위: 20-100ms
  - 기본값: 50ms
  - 단위: milliseconds
- **민감도**:
  - 범위: 0.5-2.0
  - 기본값: 1.0
  - 소수점 1자리

### 5. 버그 신고 입력 (게임 관리)
- **버그 설명** (필수):
  - 형식: textarea
  - 최소 길이: 10자
  - 권장 최대: 2000자
  - Placeholder: "버그 설명을 입력하세요...\n예: 공이 패들에 붙어서 떨어지지 않습니다."
- **재현 방법** (선택):
  - 형식: textarea
  - 권장 최대: 1000자
  - Placeholder: "재현 방법 (선택사항)...\n예: 센서 연결 후 게임 시작 시 발생"

### 6. 기능 추가 입력 (게임 관리)
- **기능 설명** (필수):
  - 형식: textarea
  - 최소 길이: 10자
  - 권장 최대: 2000자
  - Placeholder: "추가할 기능을 설명하세요...\n예: 60초 타이머를 추가해주세요"
- **추가 요구사항** (선택):
  - 형식: textarea
  - 권장 최대: 1000자

### 7. AI 챗봇 입력 (개발자 센터)
- **질문 입력**:
  - 형식: textarea (80px 높이)
  - 권장 최대: 1000자
  - Shift+Enter: 줄바꿈
  - Enter: 전송

### 8. 게임 생성 입력 (개발자 센터)
- **게임 아이디어**:
  - 형식: text input
  - 권장 최대: 300자
  - 예시 제공 (3개)
- **대화 응답**:
  - 형식: 자유 텍스트
  - AI 질문에 따라 답변

---

## 📊 출력 리포트 상세

### 1. 시스템 통계 (랜딩 페이지)
- **게임 수**: 정수 (예: 12)
- **문서 수**: 정수 (예: 35)
- **AI 벡터 수**: 정수 (예: 616)
- **업데이트**: 서버 시작 시 자동 수집

### 2. 게임 목록 통계 (게임 목록 페이지)
- **전체 게임**: 정수
- **솔로 게임**: 정수 (type === 'solo')
- **듀얼 게임**: 정수 (type === 'dual')
- **멀티 게임**: 정수 (type === 'multi')

### 3. 세션 현황 (게임 상세)
- **세션 코드**: 4자리 숫자 (예: `0000`)
- **QR 코드**: 200x200px 이미지
  - 라이브러리: qrcodejs@1.0.0
  - 폴백: `https://api.qrserver.com/v1/create-qr-code/`
- **연결 상태**:
  - 대기중: 🔴 "센서 연결 대기 중..."
  - 연결됨: 🟢 "센서 연결됨"

### 4. 센서 진단 (센서 클라이언트)
- **가속도** (실시간):
  - x, y, z (m/s²)
  - 소수점 2자리
- **방향** (실시간):
  - alpha: 0-360° (회전)
  - beta: -180~180° (앞뒤 기울기)
  - gamma: -90~90° (좌우 기울기)
- **회전 속도** (실시간):
  - alpha, beta, gamma (deg/s)
- **초당 전송 횟수**: Hz (예: 20 Hz = 50ms 간격)
- **권한/지원 여부**: 🟢 지원됨 / 🔴 미지원

### 5. 게임 관리 출력 (게임 관리 페이지)
- **버전 배지**:
  - 형식: `v{major}.{minor}` (예: `v1.0`, `v1.1`, `v2.0`)
  - 색상: 초록색 배지
  - 실시간 로드: 페이지 로드 시 API 호출
- **버그 수정 성공 알림**:
  ```
  ✅ 버그가 수정되었습니다!
  버전: v1.1
  ```
- **기능 추가 성공 알림**:
  ```
  ✅ 기능이 추가되었습니다!
  버전: v1.2
  ```
- **수정 이력 팝업**:
  ```
  📜 수정 이력:

  버그 수정
  공이 패들에 붙어있는 문제 해결
  버전: v1.1
  시간: 2025-10-11 14:30:25

  ---

  기능 추가
  60초 타이머 추가
  버전: v1.2
  시간: 2025-10-11 15:45:12
  ```

### 6. AI 챗봇 출력 (개발자 센터)
- **AI 응답**: 마크다운 렌더링 (marked.js)
- **코드 블록**: 하이라이팅 지원
- **링크**: 클릭 가능, 파란색
- **로딩 상태**: 점 3개 애니메이션

### 7. 게임 생성 진행률 (개발자 센터)
- **실시간 진행률 바**: 0-100%
- **단계별 상태**:
  - Step 1 (0-20%): "게임 아이디어 분석 중..."
  - Step 2 (20-40%): "관련 문서 검색 중... (616개 임베딩)"
  - Step 3 (40-80%): "Claude AI로 게임 코드 생성 중..."
  - Step 4 (80-90%): "게임 코드 검증 중..."
  - Step 5 (90-100%): "게임 파일 저장 및 등록 중..."
- **아이콘 변화**:
  - 대기: ⏳ (투명도 40%)
  - 진행중: ⏳ (투명도 100%, 굵게)
  - 완료: ✅ (투명도 60%)

### 8. 게임 생성 결과 (개발자 센터)
- **게임 ID**: 텍스트 (예: `my-tilt-game`)
- **게임 이름**: 텍스트 (예: "기울기 미로 게임")
- **게임 타입**: solo | dual | multi
- **검증 점수**: X/100 (예: 85/100)
- **게임 URL**: `/games/{gameId}/` (새 탭에서 열기)
- **ZIP 다운로드**: `{gameId}.zip` 파일
  - 내용: `{gameId}/index.html`, `{gameId}/game.json`
  - 크기: 일반적으로 10-50 KB

---

## 🔧 에러 처리 및 검증

### 1. 세션 코드 검증
- **입력 검증**: 정규식 `^\d{4}$`
- **실패 메시지**: "⚠️ 4자리 숫자만 입력하세요"
- **성공**: 세션 연결 시도

### 2. 센서 권한 에러
- **거부 시**:
  ```
  ⚠️ 센서 권한이 거부되었습니다.

  iOS 설정 > Safari > 모션 및 방향 접근
  설정에서 권한을 허용해주세요.
  ```
- **미지원 브라우저**:
  ```
  ❌ 이 브라우저는 센서를 지원하지 않습니다.
  Safari 또는 Chrome을 사용해주세요.
  ```

### 3. 버그 신고/기능 추가 에러
- **빈 입력**: "⚠️ 설명을 입력해주세요."
- **네트워크 에러**: "❌ 요청 실패: {에러 메시지}"
- **서버 에러**: "❌ 오류: {서버 응답 메시지}"

### 4. 게임 생성 에러
- **세션 없음**: "⚠️ 세션이 없습니다. 대화를 먼저 시작해주세요."
- **생성 실패**:
  ```
  ❌ 게임 생성 실패: {에러 메시지}

  다시 시도하거나 요구사항을 수정해주세요.
  ```

### 5. API 타임아웃
- **제한시간**: 120초 (2분)
- **타임아웃 메시지**: "❌ 요청 시간 초과. 다시 시도해주세요."

---

## 📱 반응형 디자인

### 모바일 (< 768px)
- **게임 카드 그리드**: 1열
- **통계 바**: 세로 배치
- **헤더 버튼**: 세로 배치
- **사이드바**: 숨김 (햄버거 메뉴)

### 태블릿 (768px ~ 1024px)
- **게임 카드 그리드**: 2열
- **통계 바**: 2x2 그리드

### 데스크톱 (> 1024px)
- **게임 카드 그리드**: 3-4열 (auto-fill)
- **통계 바**: 가로 배치
- **사이드바**: 320px 고정

---

## 🎨 디자인 시스템

### 색상
- **Primary**: `#6366F1` (인디고)
- **Secondary**: `#8B5CF6` (보라)
- **Success**: `#10B981` (초록)
- **Error**: `#EF4444` (빨강)
- **Background**: `#0F172A` (다크 블루)
- **Surface**: `rgba(30, 41, 59, 0.6)` (반투명 회색)

### 타이포그래피
- **제목 (H1)**: 2.5-4rem, 굵게 (700-900), 그라데이션
- **부제 (H2)**: 1.5-2rem, 중간 (600)
- **본문 (P)**: 1rem, 보통 (400), line-height 1.6
- **코드**: Monaco, Menlo, 고정폭

### 애니메이션
- **페이드인**: 0.8s ease
- **호버**: 0.2-0.3s ease
- **모달**: slideUp 0.3s ease-out

---

## 🚀 키보드 단축키

### 전역
- **ESC**: 모달 닫기

### AI 챗봇
- **Enter**: 메시지 전송
- **Shift+Enter**: 줄바꿈

### 게임 생성기
- **Enter**: 메시지 전송 (input에서)

---

## 📡 실시간 업데이트 (WebSocket)

### 이벤트 목록
1. **game-generation-progress**
   - 주기: 생성 단계마다 (5회)
   - 데이터: `{ sessionId, step, percentage, message }`
   - 리스너: 게임 생성기 페이지

2. **sensor-data**
   - 주기: 50ms (20 Hz)
   - 데이터: `{ sensorId, gameType, data: { orientation, acceleration, rotationRate }, timestamp }`
   - 리스너: 게임 페이지

3. **session-created**
   - 트리거: 세션 생성 시
   - 데이터: `{ sessionCode, qrUrl, gameType }`
   - 리스너: 게임 페이지

4. **sensor-connected**
   - 트리거: 센서 클라이언트 연결 시
   - 데이터: `{ sensorId, gameType }`
   - 리스너: 게임 페이지

---

## 🔒 보안 및 검증

### 입력 검증
- **세션 코드**: 4자리 숫자만 허용
- **게임 ID**: 영문, 숫자, 하이픈, 언더스코어만 허용
- **텍스트 입력**: HTML 태그 이스케이프
- **URL 파라미터**: 인코딩 필수

### CORS 정책
- **허용 Origin**: 동일 도메인만
- **허용 메서드**: GET, POST
- **허용 헤더**: Content-Type, Authorization

### Rate Limiting (권장)
- **API 요청**: 분당 100회
- **WebSocket 연결**: 분당 10회
- **파일 다운로드**: 분당 5회

---

## 📊 성능 지표

### 로딩 시간
- **랜딩 페이지**: < 1초
- **게임 목록**: < 2초
- **게임 시작**: < 3초
- **게임 생성**: 30-60초

### WebSocket 지연
- **센서 데이터**: < 100ms
- **진행률 업데이트**: < 200ms

### 동시 접속
- **세션**: 최대 100개
- **센서 연결**: 세션당 1-10개

---

## 🌐 브라우저 지원

### 권장 브라우저
- **Chrome**: 90+ (최신 권장)
- **Safari**: 14+ (iOS 센서 필수)
- **Firefox**: 88+
- **Edge**: 90+

### 센서 지원
- **iOS Safari**: 14.5+ (권한 필요)
- **Android Chrome**: 모든 버전
- **데스크톱**: 센서 미지원 (개발자 도구로 시뮬레이션 가능)

---

**최종 업데이트**: 2025-10-11
**버전**: v6.0
**작성자**: AI 기반 문서화 시스템
